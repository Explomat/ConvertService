1. Когда происходит разрыв связи клиента с этой службой, ffmpeg продолжает выполняться, а поток на клиенте закрывается. 
Надо завершать ffmpeg при разрыве связи или какой то другой ошибке.
2. Добавить проверку имени выходного файла, т.к. Windows запрещает создавать названия с некоторыми символами.